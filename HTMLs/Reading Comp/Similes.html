<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Simile or Not Practice</title>
<style>
  :root{
    --bg1:#93c5fd;
    --bg2:#fef08a;
    --card:#ffffff;
    --green:#16a34a;
    --red:#dc2626;
    --blue:#2563eb;
    --text:#0f172a;
  }
  html,body{
    height:100%;
    margin:0;
    font-family:"Poppins",Arial,sans-serif;
    background: linear-gradient(135deg, var(--bg1), var(--bg2));
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
  }
  .wrap{
    width:92%;
    max-width:600px;
    background:var(--card);
    border-radius:18px;
    padding:28px;
    box-shadow:0 8px 24px rgba(2,6,23,0.12);
  }
  h1{
    margin:0 0 12px 0;
    color:#1e3a8a;
    font-size:22px;
  }
  #sentence{
    font-size:28px;
    line-height:1.3;
    font-weight:700;
    color:var(--text);
    margin:28px 0;
    user-select:none;
  }
  .controls{
    display:flex;
    justify-content:center;
    gap:12px;
    margin-top:12px;
    flex-wrap:wrap;
  }
  button{
    border:none;
    padding:14px 24px;
    border-radius:12px;
    cursor:pointer;
    color:white;
    font-size:18px;
    font-weight:600;
    width:45%;
    max-width:220px;
  }
  .btn-green{ background:var(--green);}
  .btn-red{ background:var(--red);}
  .btn-blue{ background:var(--blue);}
  #feedback{margin-top:14px;font-weight:600;min-height:28px;}
  
  /* TIMER TOP-LEFT */
  #timer{
    position:fixed;
    top:14px;
    left:20px;
    background: rgba(255,255,255,0.9);
    padding:8px 10px;
    border-radius:10px;
    font-weight:600;
    color:#334155;
  }

  #summary{
    display:none;
    margin-top:18px;
    text-align:left;
    width:100%;
    padding:18px;
    border-radius:10px;
    background: rgba(15,23,42,0.03);
  }

  .correct{ color:var(--green); font-weight:700; }
  .incorrect{ color:var(--red); font-weight:700; }
  .hint{ color:#475569; margin-top:12px; font-size:14px; }
  
  @media(max-width:480px){ 
    #sentence{font-size:22px;} 
    .wrap{padding:18px;} 
    button{width:100%;}
  }
</style>
</head>
<body>
<div class="wrap">
<h1>Simile or Not?</h1>

<div id="sentence" aria-live="polite"></div>

<div class="controls">
  <button class="btn-green" id="simileBtn">Simile (1)</button>
  <button class="btn-red" id="notBtn">Not a Simile (2)</button>
</div>

<div class="controls" style="margin-top:20px;">
  <button class="btn-blue" id="resetBtn">Reset</button>
  <button class="btn-red" id="stopBtn">Stop</button>
</div>

<div id="feedback" aria-live="polite"></div>
<div class="hint">Press <strong>1</strong> for Simile, <strong>2</strong> for Not a Simile</div>

<div id="summary" aria-live="polite"></div>
</div>

<div id="timer">Time: 0s</div>

<script>
(function(){

// ------------------- SENTENCES -------------------
const sentences=[
  {text:"The dog ran as fast as a rocket.", answer:1},
  {text:"His smile was as bright as the sun.", answer:1},
  {text:"She was like a butterfly in the wind.", answer:1},
  {text:"The rain cooled the air.", answer:2},
  {text:"He slept through the entire movie.", answer:2}
  // Add your full list here
];

// ------------------- VARIABLES -------------------
let pool=[], currentSentence=null;
let total=0, correctCount=0, history=[];
let answered=false;
let timerInterval=null, startTime=null, elapsed=0;

const sentenceEl=document.getElementById('sentence');
const feedbackEl=document.getElementById('feedback');
const timerEl=document.getElementById('timer');
const summaryDiv=document.getElementById('summary');
const simileBtn=document.getElementById('simileBtn');
const notBtn=document.getElementById('notBtn');
const resetBtn=document.getElementById('resetBtn');
const stopBtn=document.getElementById('stopBtn');

// ------------------- FUNCTIONS -------------------
function shuffle(a){
  for(let i=a.length-1;i>0;i--){
    let j=Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}

function pickNext(){
  if(pool.length===0) pool=shuffle([...sentences]);
  return pool.pop();
}

function showSentence(s){
  currentSentence=s;
  sentenceEl.textContent=s.text;
  feedbackEl.textContent='';
  answered=false;
}

function startTimer(){
  startTime=Date.now();
  timerInterval=setInterval(()=>{
    elapsed=Math.floor((Date.now()-startTime)/1000);
    timerEl.textContent=`Time: ${elapsed}s`;
  },1000);
}

function stopTimer(){
  clearInterval(timerInterval);
  timerInterval=null;
}

function startGame(){
  pool=shuffle([...sentences]);
  showSentence(pickNext());
  startTimer();
}

function markAnswer(choice){
  if(answered) return;
  answered=true;

  total++;
  let correct=(choice===currentSentence.answer);

  if(correct){
    correctCount++;
    feedbackEl.textContent="✅ Correct";
    feedbackEl.style.color="var(--green)";
  } else {
    feedbackEl.textContent="❌ Incorrect";
    feedbackEl.style.color="var(--red)";
  }

  history.push({sentence:currentSentence.text, correct});
  setTimeout(()=> showSentence(pickNext()), 350);
}

// ------------------- EVENT LISTENERS -------------------
simileBtn.addEventListener("click", ()=>markAnswer(1));
notBtn.addEventListener("click", ()=>markAnswer(2));

document.addEventListener("keydown", e=>{
  if(e.repeat) return;
  if(e.key==="1") markAnswer(1);
  else if(e.key==="2") markAnswer(2);
});

// ------------------- STOP SESSION -------------------
function stopSession(){
  stopTimer();
  sentenceEl.style.display='none';
  stopBtn.style.display='none';
  feedbackEl.textContent='';

  const percent=total?Math.round((correctCount/total)*100):0;
  let html=`<h2 style="text-align:center">Session Summary</h2>`;
  html+=`<p><strong>Time:</strong> ${elapsed}s</p>`;
  html+=`<p><strong>Total:</strong> ${total}</p>`;
  html+=`<p><strong>Correct:</strong> ${correctCount}</p>`;
  html+=`<p><strong>Incorrect:</strong> ${total-correctCount}</p>`;
  html+=`<p><strong>Score:</strong> ${percent}%</p><hr>`;
  html+=`<div><strong>Responses:</strong></div>`;

  history.forEach(item=>{
    html+= item.correct
      ? `<div class="correct" style="text-align:center">${item.sentence}</div>`
      : `<div class="incorrect" style="text-align:center">${item.sentence}</div>`;
  });

  html+=`<div style="text-align:center;margin-top:12px">
           <button id="playAgain" class="btn-red" style="padding:10px 18px;">Play Again</button>
         </div>`;

  summaryDiv.innerHTML=html;
  summaryDiv.style.display='block';
  document.getElementById('playAgain').addEventListener('click', resetAll);
}

// ------------------- RESET -------------------
function resetAll(){
  stopTimer();
  total=0;
  correctCount=0;
  history=[];
  answered=false;
  elapsed=0;

  timerEl.textContent='Time: 0s';
  summaryDiv.style.display='none';
  sentenceEl.style.display='block';
  stopBtn.style.display='inline-block';

  startGame();
}

resetBtn.addEventListener('click', resetAll);
stopBtn.addEventListener('click', stopSession);

// --- AUTO-START GAME ---
startGame();

})();
</script>
</body>
</html>
