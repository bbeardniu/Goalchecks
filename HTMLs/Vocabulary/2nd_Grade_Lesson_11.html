<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Vocabulary Assessment</title>
<style>
  :root{
    --bg1:#93c5fd;
    --bg2:#fef08a;
    --card:#ffffff;
    --green:#16a34a;
    --red:#dc2626;
    --blue:#2563eb;
    --text:#0f172a;
  }
  html,body{
    height:100%;
    margin:0;
    font-family:"Poppins",Arial,sans-serif;
    background: linear-gradient(135deg, var(--bg1), var(--bg2));
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
  }
  .wrap{
    width:92%;
    max-width:600px;
    background:var(--card);
    border-radius:18px;
    padding:28px;
    box-shadow:0 8px 24px rgba(2,6,23,0.12);
  }
  h1{
    margin:0 0 12px 0;
    color:#1e3a8a;
    font-size:22px;
  }
  #sentence{
    font-size:26px;
    line-height:1.4;
    font-weight:700;
    color:var(--text);
    margin:28px 0;
    user-select:none;
  }
  .controls{
    display:flex;
    justify-content:center;
    gap:12px;
    margin-top:12px;
    flex-wrap:wrap;
  }
  button{
    border:none;
    padding:10px 20px;
    border-radius:10px;
    cursor:pointer;
    color:white;
    font-size:16px;
  }
  .btn-green{ background:var(--green);}
  .btn-green:hover{ background:#15803d;}
  .btn-red{ background:var(--red);}
  .btn-red:hover{ background:#c63025;}
  .btn-blue{ background:var(--blue);}
  .btn-blue:hover{ background:#1e61d4;}
  #feedback{margin-top:14px;font-weight:600;min-height:28px;}
  #timer{
    position:fixed;
    bottom:14px;
    left:20px;
    background: rgba(255,255,255,0.9);
    padding:8px 10px;
    border-radius:10px;
    font-weight:600;
    color:#334155;
  }
  #summary{
    display:none;
    margin-top:18px;
    text-align:left;
    width:100%;
    padding:18px;
    border-radius:10px;
    background: rgba(15,23,42,0.03);
  }
  .correct{ color:var(--green); font-weight:700; }
  .incorrect{ color:var(--red); font-weight:700; }
  .hint{ color:#475569; margin-top:6px; font-size:14px; }
  @media(max-width:480px){ #sentence{font-size:22px;} .wrap{padding:18px;} }
</style>
</head>
<body>
<div class="wrap">
<h1>Vocabulary Assessment</h1>
<div id="sentence" aria-live="polite">Press Start Game to begin</div>
<div class="controls">
  <button class="btn-green" id="startBtn">Start Game</button>
  <button class="btn-red" id="resetBtn">Reset</button>
  <button class="btn-blue" id="stopBtn">Stop</button>
</div>
<div id="feedback" aria-live="polite"></div>
<div class="hint">
  Press <strong>1</strong> for <em>impossible</em>, 
  <strong>2</strong> for <em>believe</em>, 
  <strong>3</strong> for <em>problem</em>, 
  <strong>4</strong> for <em>furious</em>.
</div>
<div id="summary" aria-live="polite"></div>
</div>
<div id="timer">Time: 0s</div>

<script>
(function(){
const sentences = [
  {text:"It seemed ______ to lift the car by myself.", answer:1},
  {text:"I can’t ______ that you finished the test so quickly!", answer:2},
  {text:"We had a big ______ with our computer during class.", answer:3},
  {text:"He was absolutely ______ when he found out his bike was stolen.", answer:4},
  {text:"The task was nearly ______ for one person to do alone.", answer:1},
  {text:"Do you ______ in magic or think it’s just a trick?", answer:2},
  {text:"The main ______ was that no one brought their homework.", answer:3},
  {text:"She was ______ after her brother broke her favorite toy.", answer:4},
  {text:"It felt ______ to finish the puzzle in five minutes.", answer:1},
  {text:"I can hardly ______ how tall that mountain is.", answer:2},
  {text:"There’s a ______ with the printer; it won’t turn on.", answer:3},
  {text:"Mom was ______ when she saw the mess in the kitchen.", answer:4}
];

let pool = [], currentSentence = null, total = 0, correctCount = 0;
let history = [], started = false, answered = false, timerInterval = null;
let startTime = null, elapsed = 0;

const sentenceEl = document.getElementById('sentence');
const feedbackEl = document.getElementById('feedback');
const timerEl = document.getElementById('timer');
const summaryDiv = document.getElementById('summary');
const startBtn = document.getElementById('startBtn');
const resetBtn = document.getElementById('resetBtn');
const stopBtn = document.getElementById('stopBtn');

function shuffle(a){for(let i=a.length-1;i>0;i--){let j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}

function showSentence(s){currentSentence=s;sentenceEl.textContent=s.text;feedbackEl.textContent='';answered=false;}

function pickNext(){if(pool.length===0) pool=shuffle([...sentences]); return pool.pop();}

function startTimer(){if(started) return; started=true; startTime=Date.now(); timerInterval=setInterval(()=>{elapsed=Math.floor((Date.now()-startTime)/1000);timerEl.textContent=`Time: ${elapsed}s`;},1000);}

function stopTimer(){if(timerInterval) clearInterval(timerInterval); timerInterval=null;}

function markAnswer(choice){
  if(!started) startTimer();
  if(answered) return;
  answered=true;
  total++;
  let correct = (choice===currentSentence.answer);
  if(correct){ correctCount++; feedbackEl.textContent='✅ Correct'; feedbackEl.style.color='var(--green)';}
  else{ feedbackEl.textContent='❌ Incorrect'; feedbackEl.style.color='var(--red)';}
  history.push({sentence:currentSentence.text, correct});
  setTimeout(()=> showSentence(pickNext()),500);
}

document.addEventListener('keydown',e=>{
  if(!started || e.repeat) return;
  if(['1','2','3','4'].includes(e.key)) markAnswer(Number(e.key));
});

function stopSession(){
  stopTimer();
  sentenceEl.style.display='none';
  stopBtn.style.display='none';
  feedbackEl.textContent='';
  const percent = total?Math.round((correctCount/total)*100):0;
  let html=`<h2 style="text-align:center;margin-top:0">Session Summary</h2>`;
  html+=`<p><strong>Time:</strong> ${elapsed}s</p>`;
  html+=`<p><strong>Total Attempted:</strong> ${total}</p>`;
  html+=`<p><strong>Correct:</strong> ${correctCount}</p>`;
  html+=`<p><strong>Incorrect:</strong> ${total-correctCount}</p>`;
  html+=`<p><strong>Score:</strong> ${percent}%</p><hr>`;
  html+=`<div style="text-align:center"><strong>Responses (in order)</strong></div><div style="margin-top:10px">`;
  history.forEach(item=>{
    html+=item.correct
      ? `<div class="correct" style="margin:4px 0;text-align:center">${item.sentence}</div>`
      : `<div class="incorrect" style="margin:4px 0;text-align:center">${item.sentence}</div>`;
  });
  html+=`</div><div style="text-align:center;margin-top:12px"><button id="playAgain" class="btn-red" style="padding:8px 14px; border-radius:8px; color:#fff; border:none; cursor:pointer;">Play Again</button></div>`;
  summaryDiv.innerHTML=html; summaryDiv.style.display='block';
  document.getElementById('playAgain').addEventListener('click',resetAll);
}

function resetAll(){
  stopTimer();
  started=false; answered=false;
  total=0; correctCount=0; history=[];
  elapsed=0; timerEl.textContent='Time: 0s';
  summaryDiv.style.display='none'; sentenceEl.style.display='block'; stopBtn.style.display='inline-block';
  pool=shuffle([...sentences]);
  sentenceEl.textContent='Press Start Game to begin';
}

startBtn.addEventListener('click',()=>{
  startBtn.style.display='none';
  showSentence(pickNext());
  startTimer();
});
resetBtn.addEventListener('click',resetAll);
stopBtn.addEventListener('click',stopSession);

})();
</script>
</body>
</html>
